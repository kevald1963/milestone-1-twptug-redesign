{% extends 'base.html' %}
{% block content %}

    <section class="row">

        <!-- CALENDAR BODY -->
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <div class="calendar-container">
                <div class="calendar">
                    <div class="month">
                        <i class="fas fa-angle-left prev"></i>
                        <div class="date">
                            <h1></h1>
                            <p></p>
                        </div>
                        <i class="fas fa-angle-right next"></i>
                    </div>

                    <div class="weekdays">
                        <div>Sun</div>
                        <div>Mon</div>
                        <div>Tue</div>
                        <div>Wed</div>
                        <div>Thu</div>
                        <div>Fri</div>
                        <div>Sat</div>
                    </div>

                    <div class="days">
                        <div class="prev-date">26</div>
                        <div class="prev-date">27</div>
                        <div class="prev-date">28</div>
                        <div class="prev-date">29</div>
                        <div class="prev-date">30</div>
                        {% for i in range(1, 32) %}
                            <div id="{{ i }}">{{ i }}</div>
                        {% endfor %}
                        <div class="date-next">1</div>
                        <div class="date-next">2</div>
                        <div class="date-next">3</div>
                        <div class="date-next">4</div>
                        <div class="date-next">5</div>
                        <div class="date-next">6</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- EVENT PANEL -->
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <div class="home-page-news">
                <span class="uppercase panel-title">Events</span><br><br>
                <p class="title ">Title: </p>
                <p class="description">Description: </p>
                <p class="date">Date: </p>
                <p class="date">Time: </p>
            </div>
        </div>

    </section>

    <script>
        //
        // Check day of month from events table in database and mark those dates on calendar.
        //
        let events = {{ events|safe }};
        let day_of_month = [];

        for (let item of events) {
            day_of_month.push(item.day_of_month);
            document.getElementById(item.day_of_month.toString()).setAttribute("class", "event");
        };
    </script>

    <script>
        //
        // Display event information when a day is clicked for the currently displayed month.
        //

        document.addEventListener('click', function(e) {
            let elemClass = document.getElementById(e.target.id).getAttribute("class");
            if (elemClass == "event" || elemClass == "event-today") {
                let calendar_events = {{ events|safe }};
                let target_id = e.target.id;
                let title = [];
                let description = [];
                let event_date = [];
                let event_time = [];
                calendar_events.forEach(function(item) {
                    if (item.day_of_month == target_id) {
                        console.log('target_id: ' + target_id);
                        console.log('DOM: ' + item.day_of_month);
                        title.push(item.title);
                        description.push(item.description);
                        event_date.push(item.event_date);
                        event_time.push(item.event_time);
                        console.log('title = ', title);
                    };
                });
            };
        });
    </script>

    <script src='static/js/script.js' type="text/javascript"></script>

{% endblock %}
